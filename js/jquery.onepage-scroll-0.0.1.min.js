/*!
 * @version 0.0.1
 * @package jquery.onepage.scroll
 * @copyright © 2014 TRX-Webdesign, All rights reserved. http://www.trx-webdesign.de
 * @license GNU General Public License http://www.gnu.org/licenses/gpl-3.0.html
 * @author Timo Gelhard
 */
(function(b,a,c){b.fn.extend({onePageScroll:function(d){var g={sectionSelector:null,topMargin:50,topElement:null,offsetAktiv:10,position:"right",emptyContent:false,ease:"easeInOutQuart",animationDuration:1000,animationDelay:0,keyNavigation:true,tooltip:true,tooltipSelector:"",tooltipColor:"#000",tooltipBackground:"#ff9900",naviItemWidth:40,naviItemHeight: "auto",buttonColor:"#fff",buttonColorAktiv:"#ffffff",buttonSize:2};var e=b.extend(g,d);var i=b(a),h=b(document),f=b("body");return this.each(function(){var k=e,p=this,l=(k.topElement!==null)?k.topElement.height():k.topMargin,r=(k.position==="right")?"right":"left";if((k.buttonSize+4)>k.naviItemWidth||(k.buttonSize+4)>k.naviItemHeight){console.log('The "button" is bigger then the "navi-item"')}f.append('<div class="scroll-navigation-container"></div>');var u=b(".scroll-navigation-container");u.addClass(r);b.each(k.sectionSelector,function(x){if(b.trim(b(this).html())!==""||(b.trim(b(this).html())===""&&k.emptyContent===true)){if(!b(this).attr("id")){console.log("The Element with Index: "+x+' has no id="". It is required to scroll to Element')}var w="",y;if(k.tooltip===true){y="";if(k.tooltipSelector!==""){if(b(this).find(k.tooltipSelector).length){if(b(this).find(k.tooltipSelector)){y=b(this).find(k.tooltipSelector).html()}}}else{if(b(this).data("title")){y=b(this).data("title")}}if(y!==""){w='<div class="navi-tooltip">'+y+"</div>"}}u.append('<div class="navi-item">'+w+'<button class="button-circle" type="button" data-scroll-to="'+b(this).attr("id")+'"></button></div>')}});var v=b(".navi-item"),j=b(".navi-item button"),q=b(".navi-tooltip");var o=function(w){b("html,body").delay(k.animationDelay).animate({scrollTop:w.offset().top-l},k.animationDuration,k.ease)};if(k.tooltip===true){if(!checkDevice.touch()){j.hover(function(){b(this).prev().fadeIn(200)},function(){b(this).prev().fadeOut(50)})}}j.click(function(){var w=b(this).data("scroll-to");o(b("#"+w));b(this).prev().fadeOut(50);return false});var n=function(){var y;if(checkDevice.ie9before()){y="#2E2E2E"}else{y=k.background}u.css({padding:"10px 0",position:"fixed",background:y,boxSizing:"border-box",height:"auto"});v.css({width:k.naviItemWidth,height:k.naviItemHeight});j.css({width:k.buttonSize,height:k.buttonSize,borderRadius:k.buttonBorderRadius,background:k.buttonColor,border:k.buttonBorder});var x;var w;if(checkDevice.ie9before()){x="#ffffff";w="#2e2e2e"}else{x=k.tooltipColor;w=k.tooltipBackground}q.css({right:k.naviItemWidth+6,color:x,background:w});if(u.outerHeight()>i.height()){v.css({width:k.naviItemWidth,height:(i.height()-20)/k.sectionSelector.length});j.css({marginTop:(v.height()-(k.buttonSize+parseInt(j.css("border-left-width"),10)*2))/2,marginLeft:(k.naviItemWidth-(k.buttonSize+parseInt(j.css("border-left-width"),10)*2))/2});u.css({top:0,height:"100%",border:k.borderNavigation,borderTop:"none",borderBottom:"none",borderRadius:0});if(k.position==="right"){u.css({borderRight:"none"})}else{u.css({borderLeft:"none"})}}else{v.css({width:k.naviItemWidth,height:k.naviItemHeight});j.css({marginTop:(k.naviItemHeight-(k.buttonSize+parseInt(j.css("border-left-width"),10)*2))/2,marginLeft:(k.naviItemWidth-(k.buttonSize+parseInt(j.css("border-left-width"),10)*2))/2});u.css({top:(i.height()-u.outerHeight())/2,border:k.borderNavigation,borderTop:k.borderNavigation,borderBottom:k.borderNavigation});if(k.position==="right"){u.css({borderRadius:k.borderRadius+"px 0 0 "+k.borderRadius+"px",borderRight:"none"})}else{u.css({borderRadius:"0 "+k.borderRadius+"px "+k.borderRadius+"px 0",borderLeft:"none"})}}};n();var m;var s=function(w){j.css({background:k.buttonColor}).removeClass("buttonAktiv");b('[data-scroll-to="'+w+'"]').css({background:k.buttonColorAktiv}).addClass("buttonAktiv");m=w};var t=function(){b.each(k.sectionSelector,function(){if(i.scrollTop()===0){s(k.sectionSelector.first().attr("id"))}else{if(i.scrollTop()>=(h.height()-i.height())){s(k.sectionSelector.last().attr("id"))}else{if(i.scrollTop()>b(this).offset().top-l-k.offsetAktiv&&i.scrollTop()<b(this).offset().top+b(this).outerHeight()-l-k.offsetAktiv){s(b(this).attr("id"))}}}})};t();i.scroll(function(){t()});i.resize(function(){n()});if(k.keyNavigation===true){h.keydown(function(w){if(w.keyCode===33||w.keyCode===34){if(w.keyCode===33){if(m!==k.sectionSelector.first().attr("id")){o(b("#"+m).prev())}}else{if(m!==k.sectionSelector.last().attr("id")){o(b("#"+m).next())}}return false}})}})}});b.fn.extend({onePageScrollDestroy:function(d){var g={};var e=b.extend(g,d);var f=b(".navi-item button");f.unbind();b(".scroll-navigation-container").remove()}})})(jQuery,window);var checkDevice=(function(){return{android:function(){return navigator.userAgent.match(/Android/i)},androidPhone:function(){return navigator.userAgent.match(/Android.+Mobile/i)},androidTablet:function(){return(checkDevice.android()&&!checkDevice.androidPhone())},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},iPhone:function(){return navigator.userAgent.match(/iPhone/i)},iPod:function(){return navigator.userAgent.match(/iPod/i)},iPad:function(){return navigator.userAgent.match(/iPad/i)},iOS:function(){return(checkDevice.iPhone()||checkDevice.iPod()||checkDevice.iPad())},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windowsPhone:function(){return navigator.userAgent.match(/IEios/i)},touch:function(){return(checkDevice.android()||checkDevice.blackberry()||checkDevice.iOS()||checkDevice.opera()||checkDevice.windowsPhone())},tablet:function(){return(checkDevice.iPad()||checkDevice.androidTablet())},mobile:function(){return(checkDevice.touch()&&!checkDevice.tablet())},safari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0},ie6:function(){return navigator.userAgent.match(/MSIE\s6/i)},ie7:function(){return navigator.userAgent.match(/MSIE\s7/i)},ie8:function(){return navigator.userAgent.match(/MSIE\s8/i)},ie9:function(){return navigator.userAgent.match(/MSIE\s9/i)},ie10:function(){return navigator.userAgent.match(/MSIE\s10/i)},ie9before:function(){return(checkDevice.ie8()||checkDevice.ie7()||checkDevice.ie6())},ie10before:function(){return(checkDevice.ie9before()||checkDevice.ie9())},ie9After:function(){return(checkDevice.ie10()||checkDevice.ie9()||navigator.userAgent.match(/Trident\/[7-9].[0-9]/i))}}})();var checkMedia=(function(){return{xxs:function(){return matchMedia("only screen and (max-width: 480px)").matches},xs:function(){return matchMedia("only screen and (max-width: 767px)").matches},sm:function(){return matchMedia("only screen and (min-width: 768px) and (max-width: 991px)").matches},md:function(){return matchMedia("only screen and (min-width: 992px) and (max-width: 1199px)").matches},lg:function(){return matchMedia("only screen and (min-width: 1200px)").matches},xlg:function(){return matchMedia("only screen and (min-width: 1400px)").matches},size:function(){if(matchMedia("only screen and (max-width: 767px)").matches){return"xs"}if(matchMedia("only screen and (min-width: 768px) and (max-width: 991px)").matches){return"sm"}if(matchMedia("only screen and (min-width: 992px) and (max-width: 1199px)").matches){return"md"}if(matchMedia("only screen and (min-width: 1200px)").matches){return"lg"}}}})();